<div class="announcement-wrapper">
  <div class="announcement-card-container">
    <h2>ðŸ“¢ {{ 'ADMIN_ANNOUNCEMENTS.TITLE' | translate }}</h2>

    <form [formGroup]="announcementForm" (ngSubmit)="submit()">
      <mat-form-field appearance="fill">
        <mat-label>{{ 'ADMIN_ANNOUNCEMENTS.FORM.TITLE' | translate }}</mat-label>
        <input matInput formControlName="title" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>{{ 'ADMIN_ANNOUNCEMENTS.FORM.DESCRIPTION' | translate }}</mat-label>
        <textarea matInput formControlName="description" rows="2"></textarea>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>{{ 'ADMIN_ANNOUNCEMENTS.FORM.POPUP_MSG' | translate }}</mat-label>
        <textarea matInput formControlName="message" rows="2"></textarea>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>{{ 'ADMIN_ANNOUNCEMENTS.FORM.AUDIENCE' | translate }}</mat-label>
        <mat-select formControlName="audience">
          <mat-option value="all">{{ 'ADMIN_ANNOUNCEMENTS.AUDIENCES.ALL' | translate }}</mat-option>
          <mat-option value="doctors">{{ 'ADMIN_ANNOUNCEMENTS.AUDIENCES.DOCTORS' | translate }}</mat-option>
          <mat-option value="patients">{{ 'ADMIN_ANNOUNCEMENTS.AUDIENCES.PATIENTS' | translate }}</mat-option>
        </mat-select>
      </mat-form-field>

      <button mat-raised-button class="send-button" type="submit" [disabled]="announcementForm.invalid">
        {{ 'ADMIN_ANNOUNCEMENTS.FORM.SUBMIT' | translate }}
      </button>
    </form>

    <div class="sent-announcements">
      <h3>ðŸ“„ {{ 'ADMIN_ANNOUNCEMENTS.SENT.TITLE' | translate }}</h3>
      <mat-card *ngFor="let ann of announcements">
        <mat-card-title>{{ ann.title }}</mat-card-title>
        <mat-card-subtitle>
          {{ 'ADMIN_ANNOUNCEMENTS.AUDIENCES.' + ann.audience.toUpperCase() | translate }}
          â€”
          {{ ann.createdAt | date:'short' }}
        </mat-card-subtitle>
        <mat-card-content>
          <p>{{ ann.description }}</p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
